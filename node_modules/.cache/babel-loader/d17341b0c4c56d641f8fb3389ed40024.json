{"remainingRequest":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/babel-loader/lib/index.js!/Users/yokoyamakenta/Desktop/choco_mart/node_modules/vuetify-loader/lib/loader.js??ref--18-0!/Users/yokoyamakenta/Desktop/choco_mart/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yokoyamakenta/Desktop/choco_mart/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yokoyamakenta/Desktop/choco_mart/src/components/comment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yokoyamakenta/Desktop/choco_mart/src/components/comment.vue","mtime":1602320681641},{"path":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/cache-loader/dist/cjs.js","mtime":1599521191920},{"path":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/babel-loader/lib/index.js","mtime":1599521191611},{"path":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/vuetify-loader/lib/loader.js","mtime":1599521195655},{"path":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/cache-loader/dist/cjs.js","mtime":1599521191920},{"path":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/vue-loader/lib/index.js","mtime":1599521195584}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMveW9rb3lhbWFrZW50YS9EZXNrdG9wL2Nob2NvX21hcnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIi9Vc2Vycy95b2tveWFtYWtlbnRhL0Rlc2t0b3AvY2hvY29fbWFydC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwU3RhdGUsIG1hcEdldHRlcnMsIG1hcE11dGF0aW9ucywgbWFwQWN0aW9ucyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBUWVBFIGFzIF9UWVBFLCBUWVBFX1RFWFQsIFRBTEtfVFlQRSBhcyBfVEFMS19UWVBFLCBUWVBFX0NPTE9SIGFzIF9UWVBFX0NPTE9SLCBUWVBFX1RFWFRfU0hPUlQgYXMgX1RZUEVfVEVYVF9TSE9SVCwgU1RBVFVTIGFzIF9TVEFUVVMsIFNUQVRVU19URVhULCBDT01NRU5UX1RZUEUgYXMgX0NPTU1FTlRfVFlQRSB9IGZyb20gJ0AvY29uZmlnL2xpYnJhcnknOwppbXBvcnQgeyBVU0VSX1JFRiwgU0VMTF9SRUYsIEJVWV9SRUYsIE5PVElDRV9SRUYsIExJU1RfUkVGLCBUQUxLX1JFRiwgQ09NTUVOVF9SRUYgfSBmcm9tICdAL2NvbmZpZy9maXJlYmFzZS9yZWYnOwppbXBvcnQgZmlyZWJhc2UgZnJvbSAnZmlyZWJhc2UnOwppbXBvcnQgJ0AvYXNzZXRzL3Njc3MvY29tcG9uZW50cy9jaGF0LnNjc3MnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGtpbmQ6IF9DT01NRU5UX1RZUEUuTElTVCwKICAgICAgaXRlbUlkOiAnJywKICAgICAgbmFtZTogJycsCiAgICAgIHByaWNlOiAnJywKICAgICAgdWlkOiAnJywKICAgICAgdHlwZTogX1RZUEUuQlVZLAogICAgICBnb29kOiAwLAogICAgICByZXBseTogW10sCiAgICAgIGNyZWF0ZWRfYXQ6ICcnLAogICAgICBjaGF0OiB7CiAgICAgICAgdmFsdWU6ICcnLAogICAgICAgIGlzU2hvdzogZmFsc2UsCiAgICAgICAgbG9hZGluZzogZmFsc2UKICAgICAgfSwKICAgICAgdXNlckluZm86IHsKICAgICAgICBpc1Nob3c6IGZhbHNlLAogICAgICAgIHVzZXJJZDogJycsCiAgICAgICAgaXNCYW46IGZhbHNlCiAgICAgIH0sCiAgICAgIGljb25TZWxlY3Q6IHsKICAgICAgICBpc1Nob3c6IGZhbHNlCiAgICAgIH0sCiAgICAgIHNlbGZJbmZvOiBudWxsLAogICAgICBpc0dvb2Q6IGZhbHNlLAogICAgICBjYW5Hb29kOiB0cnVlLAogICAgICBsaXN0ZW5lcjogZnVuY3Rpb24gbGlzdGVuZXIoKSB7fQogICAgfTsKICB9LAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoe30sIG1hcEFjdGlvbnMoJ2ZpcmViYXNlJywgWydyZWdpc3Rlckdvb2QnLCAncmVtb3ZlR29vZCcsICdnZXROb3RpY2VMaXN0UmVmJywgJ3JlZ2lzdGVyQ29tbWVudCcsICdnZXRDb21tZW50TGlzdCcsICdnZXRUYWxrTWVtYmVyTGlzdCcsICdnZXRVc2VyVHJhZGVMaXN0J10pLCB7fSwgbWFwQWN0aW9ucygnYXV0aCcsIFsnZ2V0VXNlckJ5SWQnLCAncmVnaXN0ZXJCYW4nLCAncmVsZWFzZUJhbicsICd1cGRhdGVJY29uJ10pLCB7fSwgbWFwTXV0YXRpb25zKCdmaXJlYmFzZScsIFsncmVzZXRUYWxrTWVtYmVyTGlzdCddKSwge30sIG1hcE11dGF0aW9ucygnbG9hZGluZycsIFsnc2V0SXNMb2FkaW5nJywgJ3NldFN0YXR1c01zZyddKSwgewogICAgdGFibGVTY3JvbGw6IGZ1bmN0aW9uIHRhYmxlU2Nyb2xsKCkgewogICAgICB0aGlzLnNjcm9sbFRvKHRoaXMuJHJlZnMuY29tbWVudF90YWJsZSwgJ2JvdHRvbScsIDYwMCk7CiAgICB9LAogICAgc2V0S2luZDogZnVuY3Rpb24gc2V0S2luZChraW5kKSB7CiAgICAgIHRoaXMua2luZCA9IGtpbmQ7CiAgICB9LAogICAgaW5pdDogZnVuY3Rpb24gaW5pdChpdGVtSWQpIHsKICAgICAgdGhpcy5saXN0ZW5lciA9IENPTU1FTlRfUkVGKCkuZG9jKGl0ZW1JZCkub25TbmFwc2hvdChmdW5jdGlvbiAocXVlcnlTbmFwc2hvdCkgewogICAgICAgIHRoaXMucmVmcmVzaChpdGVtSWQpOwogICAgICB9LmJpbmQodGhpcykpOwogICAgfSwKICAgIGNsb3NlTGlzdGVuZXI6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9jbG9zZUxpc3RlbmVyID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB0aGlzLmxpc3RlbmVyKCk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocikgewogICAgICAgICAgICAgICAgICByZXR1cm4gc2V0VGltZW91dChyLCAzMDApOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIC8vIOOCq+OCr+ODhOOCremYsuatouOBpzMwMG1z572u44GE44Gm44GL44KJ44Oq44K744OD44OICiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0VGFsa01lbWJlckxpc3QoKTsKICAgICAgICAgICAgICAgIHRoaXMucmVwbHkgPSBbXTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGNsb3NlTGlzdGVuZXIoKSB7CiAgICAgICAgcmV0dXJuIF9jbG9zZUxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBjbG9zZUxpc3RlbmVyOwogICAgfSgpLAogICAgcGx1c0dvb2Q6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9wbHVzR29vZCA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAodGhpcy5jYW5Hb29kKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICB0aGlzLmNhbkdvb2QgPSBmYWxzZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyR29vZCh7CiAgICAgICAgICAgICAgICAgIGtpbmQ6IHRoaXMua2luZCwKICAgICAgICAgICAgICAgICAgaXRlbUlkOiB0aGlzLml0ZW1JZAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZnJlc2hOb3RpY2UoKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgdGhpcy5jYW5Hb29kID0gdHJ1ZTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gcGx1c0dvb2QoKSB7CiAgICAgICAgcmV0dXJuIF9wbHVzR29vZC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gcGx1c0dvb2Q7CiAgICB9KCksCiAgICBtaW51c0dvb2Q6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9taW51c0dvb2QgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FuR29vZCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgdGhpcy5jYW5Hb29kID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVHb29kKHsKICAgICAgICAgICAgICAgICAga2luZDogdGhpcy5raW5kLAogICAgICAgICAgICAgICAgICBpdGVtSWQ6IHRoaXMuaXRlbUlkCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVmcmVzaE5vdGljZSgpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICB0aGlzLmNhbkdvb2QgPSB0cnVlOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBtaW51c0dvb2QoKSB7CiAgICAgICAgcmV0dXJuIF9taW51c0dvb2QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIG1pbnVzR29vZDsKICAgIH0oKSwKICAgIHJlZnJlc2hOb3RpY2U6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWZyZXNoTm90aWNlID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgdmFyIG5vdGljZXMsIF9pdGVyYXRvck5vcm1hbENvbXBsZXRpb24sIF9kaWRJdGVyYXRvckVycm9yLCBfaXRlcmF0b3JFcnJvciwgX2l0ZXJhdG9yLCBfc3RlcCwgbm90aWNlOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Tm90aWNlTGlzdFJlZigpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICBub3RpY2VzID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gNjsKICAgICAgICAgICAgICAgIF9pdGVyYXRvciA9IG5vdGljZXMuaXRlbXNbU3ltYm9sLml0ZXJhdG9yXSgpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICBpZiAoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgbm90aWNlID0gX3N0ZXAudmFsdWU7CgogICAgICAgICAgICAgICAgaWYgKCEobm90aWNlLmlkID09PSB0aGlzLml0ZW1JZCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhpcy5pc0dvb2QgPSB0cnVlOwogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IHRydWU7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDg7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gMTg7CiAgICAgICAgICAgICAgICBfY29udGV4dDQudDAgPSBfY29udGV4dDRbImNhdGNoIl0oNik7CiAgICAgICAgICAgICAgICBfZGlkSXRlcmF0b3JFcnJvciA9IHRydWU7CiAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IF9jb250ZXh0NC50MDsKCiAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gMjI7CiAgICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDIzOwoKICAgICAgICAgICAgICAgIGlmICghX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiAmJiBfaXRlcmF0b3IucmV0dXJuICE9IG51bGwpIHsKICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yLnJldHVybigpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSAyNTsKCiAgICAgICAgICAgICAgICBpZiAoIV9kaWRJdGVyYXRvckVycm9yKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMjg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHRocm93IF9pdGVyYXRvckVycm9yOwoKICAgICAgICAgICAgICBjYXNlIDI4OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5maW5pc2goMjUpOwoKICAgICAgICAgICAgICBjYXNlIDI5OgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5maW5pc2goMjIpOwoKICAgICAgICAgICAgICBjYXNlIDMwOgogICAgICAgICAgICAgICAgdGhpcy5pc0dvb2QgPSBmYWxzZTsKCiAgICAgICAgICAgICAgY2FzZSAzMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCwgdGhpcywgW1s2LCAxOCwgMjIsIDMwXSwgWzIzLCwgMjUsIDI5XV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiByZWZyZXNoTm90aWNlKCkgewogICAgICAgIHJldHVybiBfcmVmcmVzaE5vdGljZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gcmVmcmVzaE5vdGljZTsKICAgIH0oKSwKICAgIHJlZnJlc2g6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWZyZXNoID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoaXRlbUlkKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENvbW1lbnRMaXN0KHsKICAgICAgICAgICAgICAgICAgaXRlbUlkOiBpdGVtSWQsCiAgICAgICAgICAgICAgICAgIGtpbmQ6IHRoaXMua2luZAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFRhbGtNZW1iZXJMaXN0KCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIC8vIOabtOaWsAogICAgICAgICAgICAgICAgdGhpcy5pdGVtSWQgPSB0aGlzLmNvbW1lbnRzLml0ZW0uaWQ7CiAgICAgICAgICAgICAgICB0aGlzLnVpZCA9IHRoaXMuY29tbWVudHMuaXRlbS51aWQ7CiAgICAgICAgICAgICAgICB0aGlzLnR5cGUgPSB0aGlzLmNvbW1lbnRzLml0ZW0udHlwZTsKICAgICAgICAgICAgICAgIHRoaXMucmVwbHkgPSB0aGlzLmNvbW1lbnRzLnJlcGx5OwogICAgICAgICAgICAgICAgdGhpcy5nb29kID0gdGhpcy5jb21tZW50cy5nb29kOwogICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVkX2F0ID0gdGhpcy5jb21tZW50cy5pdGVtLmNyZWF0ZWRfYXQuc2Vjb25kczsKICAgICAgICAgICAgICAgIHRoaXMuY2hhdCA9IHsKICAgICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuY2hhdC52YWx1ZSwKICAgICAgICAgICAgICAgICAgaXNTaG93OiB0aGlzLmNoYXQuaXNTaG93LAogICAgICAgICAgICAgICAgICBsb2FkaW5nOiBmYWxzZQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBpZiAodGhpcy5raW5kID09PSBfQ09NTUVOVF9UWVBFLkxJU1QpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5jb21tZW50cy5pdGVtLm5hbWU7CiAgICAgICAgICAgICAgICAgIHRoaXMucHJpY2UgPSB0aGlzLmNvbW1lbnRzLml0ZW0ucHJpY2U7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMua2luZCA9PT0gX0NPTU1FTlRfVFlQRS5UQUxLKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMubmFtZSA9IHRoaXMuY29tbWVudHMuaXRlbS50aXRsZTsKICAgICAgICAgICAgICAgICAgdGhpcy5wcmljZSA9IG51bGw7CiAgICAgICAgICAgICAgICB9IC8vIOOCueOCr+ODreODvOODq+S9jee9ruOBjOS4i+OBruaWueOBp+OBguOCjOOBsAoKCiAgICAgICAgICAgICAgICBpZiAodGhpcy4kcmVmcy5jb21tZW50X3RhYmxlLnNjcm9sbEhlaWdodCAtIHRoaXMuJHJlZnMuY29tbWVudF90YWJsZS5zY3JvbGxUb3AgPCAxMzAwKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMudGFibGVTY3JvbGwoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHJlZnJlc2goX3gpIHsKICAgICAgICByZXR1cm4gX3JlZnJlc2guYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlZnJlc2g7CiAgICB9KCksCiAgICBzZW5kQ2hhdDogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3NlbmRDaGF0ID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAgIC8qI19fUFVSRV9fKi8KICAgICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoYXQudmFsdWUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHRoaXMuY2hhdC5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyQ29tbWVudCh7CiAgICAgICAgICAgICAgICAgIGl0ZW1JZDogdGhpcy5pdGVtSWQsCiAgICAgICAgICAgICAgICAgIGtpbmQ6IHRoaXMua2luZCwKICAgICAgICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5jaGF0LnZhbHVlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgdGhpcy5jaGF0LnZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICB0aGlzLmNoYXQuaXNTaG93ID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLmNoYXQubG9hZGluZyA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy50YWJsZVNjcm9sbCgpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBzZW5kQ2hhdCgpIHsKICAgICAgICByZXR1cm4gX3NlbmRDaGF0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBzZW5kQ2hhdDsKICAgIH0oKSwKICAgIHRyYW5zbGF0ZU90aGVyRGVhbDogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3RyYW5zbGF0ZU90aGVyRGVhbCA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgICAvKiNfX1BVUkVfXyovCiAgICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KGl0ZW1JZCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Ny5wcmV2ID0gX2NvbnRleHQ3Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdjbG9zZVJlcGx5Jyk7CiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jbG9zZUxpc3RlbmVyKCk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3Nob3dSZXBseScsIGl0ZW1JZCwgX0NPTU1FTlRfVFlQRS5MSVNUKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU3LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gdHJhbnNsYXRlT3RoZXJEZWFsKF94MikgewogICAgICAgIHJldHVybiBfdHJhbnNsYXRlT3RoZXJEZWFsLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cmFuc2xhdGVPdGhlckRlYWw7CiAgICB9KCksCiAgICBzaG93VXNlckluZm86IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9zaG93VXNlckluZm8gPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOCh1c2VySWQpIHsKICAgICAgICB2YXIgdXNlckluZm87CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRoaXMuc2V0SXNMb2FkaW5nKHRydWUpOwogICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0dXNNc2coJ+ODpuODvOOCtuODvOaDheWgseWPluW+l+S4rS4uJyk7IC8vIOWIneWbnuOBruOBv+iHquWIhuOBruaDheWgseOBjOWFpeOBo+OBpuOBhOOBquOBkeOCjOOBsOWPluW+lwoKICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGZJbmZvKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VXNlckJ5SWQoewogICAgICAgICAgICAgICAgICB1c2VySWQ6IHRoaXMudXNlci51aWQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICB0aGlzLnNlbGZJbmZvID0gX2NvbnRleHQ4LnNlbnQ7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFVzZXJCeUlkKHsKICAgICAgICAgICAgICAgICAgdXNlcklkOiB1c2VySWQKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgICB1c2VySW5mbyA9IF9jb250ZXh0OC5zZW50OwogICAgICAgICAgICAgICAgdGhpcy51c2VySW5mby5pc0JhbiA9IHVzZXJJbmZvLmlzQmFuOwogICAgICAgICAgICAgICAgdGhpcy51c2VySW5mby51c2VySWQgPSB1c2VySWQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VXNlclRyYWRlTGlzdCh7CiAgICAgICAgICAgICAgICAgIHVzZXJJZDogdXNlcklkCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgIHRoaXMuc2V0SXNMb2FkaW5nKGZhbHNlKTsKICAgICAgICAgICAgICAgIHRoaXMudXNlckluZm8uaXNTaG93ID0gdHJ1ZTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOCwgdGhpcyk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHNob3dVc2VySW5mbyhfeDMpIHsKICAgICAgICByZXR1cm4gX3Nob3dVc2VySW5mby5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gc2hvd1VzZXJJbmZvOwogICAgfSgpLAogICAgc2V0SWNvbjogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3NldEljb24gPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgICAgLyojX19QVVJFX18qLwogICAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOShpY29uTm8pIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTkkKF9jb250ZXh0OSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlSWNvbih7CiAgICAgICAgICAgICAgICAgIGljb246IGljb25ObwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHRoaXMuZ2V0VGFsa01lbWJlckxpc3QoKTsgLy8gYXdhaXQgdGhpcy5yZWZyZXNoKHRoaXMuaXRlbUlkKQoKICAgICAgICAgICAgICAgIHRoaXMuaWNvblNlbGVjdC5pc1Nob3cgPSBmYWxzZTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ5LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU5LCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gc2V0SWNvbihfeDQpIHsKICAgICAgICByZXR1cm4gX3NldEljb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHNldEljb247CiAgICB9KCkKICB9KSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7CiAgICBUWVBFOiBmdW5jdGlvbiBUWVBFKCkgewogICAgICByZXR1cm4gX1RZUEU7CiAgICB9LAogICAgVEFMS19UWVBFOiBmdW5jdGlvbiBUQUxLX1RZUEUoKSB7CiAgICAgIHJldHVybiBfVEFMS19UWVBFOwogICAgfSwKICAgIFNUQVRVUzogZnVuY3Rpb24gU1RBVFVTKCkgewogICAgICByZXR1cm4gX1NUQVRVUzsKICAgIH0sCiAgICBDT01NRU5UX1RZUEU6IGZ1bmN0aW9uIENPTU1FTlRfVFlQRSgpIHsKICAgICAgcmV0dXJuIF9DT01NRU5UX1RZUEU7CiAgICB9LAogICAgVFlQRV9DT0xPUjogZnVuY3Rpb24gVFlQRV9DT0xPUigpIHsKICAgICAgcmV0dXJuIF9UWVBFX0NPTE9SOwogICAgfSwKICAgIFRZUEVfVEVYVF9TSE9SVDogZnVuY3Rpb24gVFlQRV9URVhUX1NIT1JUKCkgewogICAgICByZXR1cm4gX1RZUEVfVEVYVF9TSE9SVDsKICAgIH0KICB9LCBtYXBHZXR0ZXJzKHsKICAgIHVzZXI6ICdhdXRoL3VzZXInLAogICAgY29tbWVudHM6ICdmaXJlYmFzZS9jb21tZW50TGlzdCcsCiAgICBtZW1iZXJzOiAnZmlyZWJhc2UvdGFsa01lbWJlckxpc3QnLAogICAgdXNlckl0ZW1zOiAnZmlyZWJhc2UvdGFsa01lbWJlclRyYWRlTGlzdCcKICB9KSksCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHt9Cn07"},{"version":3,"sources":["comment.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"page-parent\">\n    <div class=\"comment table-choco\" ref=\"comment_table\">\n      <table class=\"item-table-choco back-choco body-2\" cellspacing=\"0\">\n        <tr>\n          <th class=\"item-th-choco text-choco body-2\">\n            <template v-if=\"kind === COMMENT_TYPE.LIST\">装備名</template>\n            <template v-else-if=\"kind === COMMENT_TYPE.TALK\">タイトル</template>\n          </th>\n          <td class=\"item-td-choco text-choco-dark\">{{name}}</td>\n        </tr>\n        <tr v-if=\"price\">\n          <th class=\"item-th-choco text-choco body-2\">\n            <span v-if=\"type === TYPE.BUY\">買い価格</span>\n            <span v-else-if=\"type === TYPE.SELL\">売り価格</span>\n          </th>\n          <td class=\"item-td-choco text-choco-dark\">{{price}}</td>\n        </tr>\n        <tr>\n          <th class=\"item-th-choco text-choco body-2\">作成者</th>\n          <td class=\"item-td-choco text-choco-dark\">{{members[uid] ? members[uid][\"name\"] : \"\"}}</td>\n        </tr>\n        <tr>\n          <th class=\"item-th-choco text-choco body-2\">作成日</th>\n          <td class=\"item-td-choco text-choco-dark\">{{getFormatedDate(created_at)}}</td>\n        </tr>\n      </table>\n      <ul class=\"chat-choco oneArea\">\n        <li v-for=\"(content,index) in reply\" :key=\"index\" class=\"onebox\" :class=\"{'owner': content.uid === uid, 'myself': content.uid === user.uid,'member': content.uid != user.uid}\">\n          <div class=\"fukiArea\">\n            <v-avatar size=\"30\" v-if=\"content.uid === user.uid\" class=\"pointer\" @click=\"iconSelect.isShow = true\">\n              <img :src=\"require(`@/assets/imgs/avatars/${members[content.uid].icon}.gif`)\" :style=\"getIconImageStyle(members[content.uid].icon,true)\">\n            </v-avatar>\n            <v-avatar size=\"30\" v-else class=\"pointer\" @click=\"showUserInfo(content.uid)\">\n              <img :src=\"require(`@/assets/imgs/avatars/${members[content.uid].icon}.gif`)\" :style=\"getIconImageStyle(members[content.uid].icon,false)\">\n            </v-avatar>\n            <div>\n              <div class=\"fukidasi\">\n                <p v-html=\"content.msg\" class=\"text-normal\"></p>\n                <p class=\"member_name\">{{members[content.uid] ? members[content.uid][\"name\"] : \"\"}}</p>\n              </div>\n              <p class=\"msg_time\">{{getFormatedDate(content.created_at)}}</p>\n            </div>\n          </div>\n        </li>\n      </ul>\n      <v-row justify=\"center\">\n        <v-dialog\n          v-model=\"chat.isShow\"\n          max-width=\"500\"\n          width=\"90%\"\n        >\n          <div class=\"modal-choco\">\n            <div class=\"head text-choco pl-2 body-2\">comment</div>\n            <div class=\"body text-choco-dark pa-2 mt-3 modal-textarea-choco\">\n              <v-textarea\n                outlined\n                label=\"返信..\"\n                v-model=\"chat.value\"\n                no-resize\n                height=\"180px\"\n              ></v-textarea>\n            </div>\n            <div class=\"footer\">\n              <v-btn color=\"primary\" class=\"button-choco\" :loading=\"chat.loading\" dark @click=\"sendChat()\">\n                <span>書き込む</span>\n              </v-btn>\n              <v-btn color=\"primary\" class=\"button-choco\" dark @click=\"chat.isShow = false\">\n                <span>閉じる</span>\n              </v-btn>\n            </div>\n          </div>\n        </v-dialog>\n        <v-dialog\n          v-model=\"userInfo.isShow\"\n          max-width=\"500\"\n          width=\"90%\"\n        >\n          <div class=\"modal-choco userInfo\" v-if=\"members[userInfo.userId]\">\n            <div class=\"head text-choco pl-2 body-2\">{{ members[userInfo.userId].name }}の取引情報</div>\n            <div class=\"list\">\n              <table class=\"item-table-choco back-choco\" cellspacing=\"0\" ref=\"content_table\">\n                <thead>\n                  <tr class=\"item-th-choco text-choco body-2\">\n                    <th>装備名</th>\n                    <th>価格</th>\n                    <th>返</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr\n                    v-for=\"(item,index) in [...userItems.buys, ...userItems.sells]\"\n                    :key=\"index\"\n                    class=\"item-td-choco text-choco pointer\"\n                    @click=\"\n                      userInfo.isShow = false;\n                      translateOtherDeal(item.id)\n                    \"\n                  >\n                    <td>\n                      <div class=\"item-input-choco\">\n                        <v-chip\n                          dark\n                          :color=\"TYPE_COLOR[item.type]\"\n                          x-small\n                          class=\"chip\">{{TYPE_TEXT_SHORT[item.type]}}\n                        </v-chip>\n                        <span type=\"text\" class=\"text-choco-dark pl-12 text-truncate\">\n                          {{ item.name }}                 \n                        </span>\n                      </div>\n                    </td>\n                    <td>\n                      <div class=\"item-input-choco\">\n                        <span class=\"text-choco-dark text-truncate\">{{ item.price }}</span>\n                      </div>\n                    </td>\n                    <td>\n                      <div class=\"item-input-choco\">\n                        <span class=\"text-choco-dark link pointer text-truncate\">{{item.reply}}</span>\n                      </div>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n            <div class=\"footer\">\n              <template v-if=\"selfInfo.admin\">\n                <v-btn\n                  v-if=\"userInfo.isBan\"\n                  color=\"danger\"\n                  class=\"button-choco\"\n                  dark\n                  @click=\"releaseBan({userId: userInfo.userId}); userInfo.isShow = false\"\n                >\n                  <span>BAN解除</span>\n                </v-btn>\n                <v-btn\n                  v-else\n                  color=\"danger\"\n                  class=\"button-choco\"\n                  dark\n                  @click=\"registerBan({userId: userInfo.userId}); userInfo.isShow = false\"\n                >\n                  <span>BAN</span>\n                </v-btn>\n              </template>\n              <v-btn color=\"primary\" class=\"button-choco\" dark @click=\"userInfo.isShow = false\">\n                <span>閉じる</span>\n              </v-btn>\n            </div>\n          </div>\n        </v-dialog>\n        <v-overlay :value=\"iconSelect.isShow\">\n          <v-row class=\"icon-select-area\">\n            <v-col>\n              <v-btn class=\"mt-1 mb-1\" fab dark small text icon v-for=\"n in 37\" :key=\"n\" @click=\"setIcon(n)\">\n                <v-avatar color=\"\" size=\"30\">\n                  <img :src=\"require('@/assets/imgs/avatars/'+n+'.gif')\" :style=\"getIconImageStyle(n,true)\">\n                </v-avatar>\n              </v-btn>\n            </v-col>\n          </v-row>\n          <v-row>\n            <v-col class=\"d-flex justify-center\">\n              <v-btn color=\"primary\" class=\"button-choco text-choco\" dark @click=\"iconSelect.isShow = false\">\n                <span>閉じる</span>\n              </v-btn>\n            </v-col>\n          </v-row>\n        </v-overlay>\n      </v-row>\n    </div>\n    <div class=\"panel-choco\">\n      <div class=\"good mx-2\">\n        <template v-if=\"isGood\">\n          <v-btn text icon color=\"pink\" @click=\"minusGood()\">\n            <v-icon>mdi-thumb-up</v-icon>\n          </v-btn>\n        </template>\n        <template v-else>\n          <v-btn text icon color=\"red lighten-2\" @click=\"plusGood()\">\n            <v-icon>mdi-thumb-up</v-icon>\n          </v-btn>\n        </template>\n        <span class=\"text-choco-dark\">{{good}}</span>\n      </div>\n      <v-btn class=\"mx-2 back\" fab dark small color=\"#1E2E58\" @click=\"$emit('closeReply'); closeListener()\">\n        <v-icon dark>mdi-undo</v-icon>\n      </v-btn>\n      <v-btn class=\"mx-2 write\" fab dark small color=\"#1E2E58\" @click=\"chat.isShow = true\">\n        <v-icon dark>mdi-pencil</v-icon>\n      </v-btn>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapGetters, mapMutations, mapActions } from 'vuex'\nimport { TYPE, TYPE_TEXT, TALK_TYPE, TYPE_COLOR, TYPE_TEXT_SHORT, STATUS, STATUS_TEXT, COMMENT_TYPE } from '@/config/library'\nimport { USER_REF, SELL_REF, BUY_REF, NOTICE_REF, LIST_REF, TALK_REF, COMMENT_REF } from '@/config/firebase/ref'\nimport firebase from 'firebase'\nimport '@/assets/scss/components/chat.scss'\n\nexport default {\n  data () {\n    return {\n      kind: COMMENT_TYPE.LIST,\n      itemId: '',\n      name: '',\n      price: '',\n      uid: '',\n      type: TYPE.BUY,\n      good: 0,\n      reply: [],\n      created_at: '',\n      chat: {\n        value: '',\n        isShow: false,\n        loading: false\n      },\n      userInfo: {\n        isShow: false,\n        userId: '',\n        isBan: false\n      },\n      iconSelect: {\n        isShow: false\n      },\n      selfInfo: null,\n      isGood: false,\n      canGood: true,\n      listener: () => {}\n    }\n  },\n  methods: {\n    ...mapActions('firebase', ['registerGood', 'removeGood', 'getNoticeListRef', 'registerComment', 'getCommentList', 'getTalkMemberList', 'getUserTradeList']),\n    ...mapActions('auth', ['getUserById', 'registerBan', 'releaseBan', 'updateIcon']),\n    ...mapMutations('firebase', ['resetTalkMemberList']),\n    ...mapMutations('loading', [\n      'setIsLoading',\n      'setStatusMsg'\n    ]),\n    tableScroll() {\n      this.scrollTo(this.$refs.comment_table, 'bottom', 600)\n    },\n    setKind(kind) {\n      this.kind = kind\n    },\n    init(itemId) {\n      this.listener = COMMENT_REF().doc(itemId).onSnapshot(function (querySnapshot) {\n        this.refresh(itemId)\n      }.bind(this))\n    },\n    async closeListener() {\n      this.listener()\n      await new Promise(r => setTimeout(r, 300)) // カクツキ防止で300ms置いてからリセット\n      this.resetTalkMemberList()\n      this.reply = []\n    },\n    async plusGood(){\n      if(!this.canGood) return\n      this.canGood = false\n      await this.registerGood({kind: this.kind, itemId: this.itemId})\n      await this.refreshNotice()\n      this.canGood = true\n    },\n    async minusGood(){\n      if(!this.canGood) return\n      this.canGood = false\n      await this.removeGood({kind: this.kind, itemId: this.itemId})\n      await this.refreshNotice()\n      this.canGood = true\n    },\n    async refreshNotice(){\n      const notices = await this.getNoticeListRef()\n      for(const notice of notices.items) {\n        if(notice.id === this.itemId){\n          this.isGood = true\n          return\n        }\n      }\n      this.isGood = false\n    },\n    async refresh(itemId){\n      await this.getCommentList({itemId, kind: this.kind})\n      await this.getTalkMemberList()\n\n      // 更新\n      this.itemId = this.comments.item.id\n      this.uid = this.comments.item.uid\n      this.type = this.comments.item.type\n      this.reply = this.comments.reply\n      this.good = this.comments.good\n      this.created_at = this.comments.item.created_at.seconds\n      this.chat = {\n        value: this.chat.value,\n        isShow: this.chat.isShow,\n        loading: false\n      }\n      if(this.kind === COMMENT_TYPE.LIST){\n        this.name = this.comments.item.name\n        this.price = this.comments.item.price\n      }else if(this.kind === COMMENT_TYPE.TALK){\n        this.name = this.comments.item.title\n        this.price = null\n      }\n\n      // スクロール位置が下の方であれば\n      if(this.$refs.comment_table.scrollHeight - this.$refs.comment_table.scrollTop < 1300){\n        this.tableScroll()\n      }\n    },\n    async sendChat(){\n      if(!this.chat.value) return\n      this.chat.loading = true\n      await this.registerComment({itemId: this.itemId, kind: this.kind, message: this.chat.value})\n      this.chat.value = ''\n      this.chat.isShow = false\n      this.chat.loading = false\n      this.tableScroll()\n    },\n    async translateOtherDeal(itemId) {\n      this.$emit('closeReply')\n      await this.closeListener()\n      this.$emit('showReply', itemId, COMMENT_TYPE.LIST)\n    },\n    async showUserInfo(userId) {\n      this.setIsLoading(true)\n      this.setStatusMsg('ユーザー情報取得中..')\n\n      // 初回のみ自分の情報が入っていなければ取得\n      if(!this.selfInfo) {\n        this.selfInfo = await this.getUserById({userId: this.user.uid})\n      }\n      const userInfo = await this.getUserById({userId})\n      this.userInfo.isBan = userInfo.isBan\n      this.userInfo.userId = userId\n\n      await this.getUserTradeList({userId})\n      this.setIsLoading(false)\n      this.userInfo.isShow = true\n    },\n    async setIcon(iconNo){\n      await this.updateIcon({icon: iconNo})\n      this.getTalkMemberList()\n      // await this.refresh(this.itemId)\n      this.iconSelect.isShow = false\n    }\n  },\n  computed: {\n    TYPE: () => TYPE,\n    TALK_TYPE: () => TALK_TYPE,\n    STATUS: () => STATUS,\n    COMMENT_TYPE: () => COMMENT_TYPE,\n    TYPE_COLOR: () => TYPE_COLOR,\n    TYPE_TEXT_SHORT: () => TYPE_TEXT_SHORT,\n    ...mapGetters({\n      user: 'auth/user',\n      comments: 'firebase/commentList',\n      members: 'firebase/talkMemberList',\n      userItems: 'firebase/talkMemberTradeList',\n    }),\n  },\n  mounted(){}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.comment{\n  &.table-choco{\n    padding: 9px;\n  }\n  .item-th-choco{\n    border-radius: 0;\n    width: 80px;\n    background: $base_color_4;\n  }\n  .item-td-choco{\n    background-color: $base_color_3;\n    border-bottom: 1px solid $base_color_2;\n    padding: 5px 10px;\n  }\n  .chat-choco{\n    list-style: none;\n    padding-left: 0;\n    margin-top: 12px;\n    font-family: \"choco\";\n    font-size: 14px;\n    // margin-bottom: 80px;\n    .msg{\n      background-color: #E1CABB;\n    }\n  }\n  .item-table-choco{\n    border: 1px solid $base_color_2;\n    border-radius: 7px;\n    overflow: hidden;\n    tr{\n      &:first-of-type{\n        td{\n          padding-right: 70px;\n        }\n      }\n      &:last-of-type{\n        td{\n          border: 0;\n        }\n      }\n    }\n  }\n  .item-input-choco{\n    position: relative;\n    &.chat-input-choco{\n\n    }\n  }\n}\n.icon-select-area{\n  width: 95vw;\n  max-width: 800px;\n}\n.modal-choco {\n  &.userInfo {\n    height: 500px;\n  }\n}\n.list{\n  padding: 9px;\n  height: 400px;\n  overflow: auto;\n  // padding-bottom: 0;\n  table{\n    border: 1px solid $base_color_2;\n    border-radius: 7px 7px 0 0;\n  }\n  .item-th-choco{\n    th{\n      &:first-of-type{\n        width: auto;\n        max-width: 200px;\n      }\n      &:nth-of-type(2){\n        width: 17%;\n        text-align: left;\n      }\n      &:last-of-type{\n        width: 2rem;\n      }\n    }\n  }\n}\n</style>"],"sourceRoot":"src/components"}]}