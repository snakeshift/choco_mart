{"remainingRequest":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/babel-loader/lib/index.js!/Users/yokoyamakenta/Desktop/choco_mart/node_modules/vuetify-loader/lib/loader.js??ref--18-0!/Users/yokoyamakenta/Desktop/choco_mart/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yokoyamakenta/Desktop/choco_mart/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yokoyamakenta/Desktop/choco_mart/src/views/Init.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yokoyamakenta/Desktop/choco_mart/src/views/Init.vue","mtime":1599908949686},{"path":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/cache-loader/dist/cjs.js","mtime":1599521191920},{"path":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/babel-loader/lib/index.js","mtime":1599521191611},{"path":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/vuetify-loader/lib/loader.js","mtime":1599521195655},{"path":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/cache-loader/dist/cjs.js","mtime":1599521191920},{"path":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/vue-loader/lib/index.js","mtime":1599521195584}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3lva295YW1ha2VudGEvRGVza3RvcC9jaG9jb19tYXJ0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGZpcmViYXNlIGZyb20gJ2ZpcmViYXNlJzsKaW1wb3J0IHN0b3JlIGZyb20gJy4uL3N0b3JlJzsKaW1wb3J0IGxvYWRpbmcgZnJvbSAnQC9jb21wb25lbnRzL2xvYWRpbmcudnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdJbml0JywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHt9OwogIH0sCiAgY29tcG9uZW50czogewogICAgbG9hZGluZzogbG9hZGluZwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHN0b3JlLmNvbW1pdCgnbG9hZGluZy9zZXRJc0xvYWRpbmcnLCB0cnVlKTsKICAgIHN0b3JlLmNvbW1pdCgnbG9hZGluZy9zZXRTdGF0dXNNc2cnLCAi6Kqt44G/6L6844G/5LitLi4iKTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBfbW91bnRlZCA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgLyojX19QVVJFX18qLwogICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIHQsIHVzZXJEYXRhLCB1c2VyUmVmLCBzZWxsUmVmLCBidXlSZWYsIG5vdGljZVJlZjsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIHQgPSB0aGlzOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBmaXJlYmFzZS5hdXRoKCkuc2lnbkluQW5vbnltb3VzbHkoKTsKCiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICB1c2VyRGF0YSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgc3RvcmUuY29tbWl0KCdhdXRoL29uQXV0aFN0YXRlQ2hhbmdlZCcsIHVzZXJEYXRhLnVzZXIpOwogICAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgnYXV0aC9vblVzZXJTdGF0dXNDaGFuZ2VkJywgdXNlckRhdGEudXNlci51aWQgPyB0cnVlIDogZmFsc2UpOwogICAgICAgICAgICAgIHVzZXJSZWYgPSBmaXJlYmFzZS5maXJlc3RvcmUoKS5jb2xsZWN0aW9uKCJ1c2VycyIpLmRvYyh1c2VyRGF0YS51c2VyLnVpZCk7CiAgICAgICAgICAgICAgc2VsbFJlZiA9IGZpcmViYXNlLmZpcmVzdG9yZSgpLmNvbGxlY3Rpb24oInNlbGxzIikuZG9jKHVzZXJEYXRhLnVzZXIudWlkKTsKICAgICAgICAgICAgICBidXlSZWYgPSBmaXJlYmFzZS5maXJlc3RvcmUoKS5jb2xsZWN0aW9uKCJidXlzIikuZG9jKHVzZXJEYXRhLnVzZXIudWlkKTsKICAgICAgICAgICAgICBub3RpY2VSZWYgPSBmaXJlYmFzZS5maXJlc3RvcmUoKS5jb2xsZWN0aW9uKCJub3RpY2VzIikuZG9jKHVzZXJEYXRhLnVzZXIudWlkKTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgcmV0dXJuIHVzZXJSZWYuZ2V0KCkudGhlbihmdW5jdGlvbiAoZG9jKSB7CiAgICAgICAgICAgICAgICBpZiAoZG9jLmV4aXN0cykgewogICAgICAgICAgICAgICAgICBzdG9yZS5jb21taXQoJ2xvYWRpbmcvc2V0U3RhdHVzTXNnJywgIuODpuODvOOCtuODvOaDheWgseabtOaWsOS4rS4uIik7CiAgICAgICAgICAgICAgICAgIHVzZXJSZWYudXBkYXRlKHsKICAgICAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBmaXJlYmFzZS5maXJlc3RvcmUuRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXAoKQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgnbG9hZGluZy9zZXRTdGF0dXNNc2cnLCAi5Yid5Zue44Om44O844K244O85oOF5aCx5L2c5oiQ5LitLi4iKTsgLy8g5Yid5pyf6Kit5a6aKOODpuODvOOCtuODvCkKCiAgICAgICAgICAgICAgICAgIHVzZXJSZWYuc2V0KHsKICAgICAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBmaXJlYmFzZS5maXJlc3RvcmUuRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXAoKSwKICAgICAgICAgICAgICAgICAgICBjcmVhdGVkX2F0OiBmaXJlYmFzZS5maXJlc3RvcmUuRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXAoKSwKICAgICAgICAgICAgICAgICAgICBuYW1lOiAi5ZCN44KC54Sh44GN5YaS6Zm66ICFIiwKICAgICAgICAgICAgICAgICAgICBpY29uOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoMzcgKyAxIC0gMSkpICsgMQogICAgICAgICAgICAgICAgICB9KTsgLy8g5Yid5pyf6Kit5a6aKOWjsuOCiykKCiAgICAgICAgICAgICAgICAgIHNlbGxSZWYuc2V0KHsKICAgICAgICAgICAgICAgICAgICBjb3VudDogMTUKICAgICAgICAgICAgICAgICAgfSk7IC8vIOWIneacn+ioreWumijlo7LjgospCgogICAgICAgICAgICAgICAgICBidXlSZWYuc2V0KHsKICAgICAgICAgICAgICAgICAgICBjb3VudDogMTUKICAgICAgICAgICAgICAgICAgfSk7IC8vIOWIneacn+ioreWumijpgJrnn6UpCgogICAgICAgICAgICAgICAgICBub3RpY2VSZWYuc2V0KHsKICAgICAgICAgICAgICAgICAgICBpdGVtczogW10KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgnbG9hZGluZy9zZXRTdGF0dXNNc2cnLCAi44Om44O844K244O85pu05paw5a6M5LqGLi4iKTsKICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHQuJHJvdXRlci5wdXNoKCdob21lJyk7CiAgICAgICAgICAgICAgICBzdG9yZS5jb21taXQoJ2xvYWRpbmcvc2V0SXNMb2FkaW5nJywgZmFsc2UpOwogICAgICAgICAgICAgIH0sIDE1MDApOwoKICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICB9KSk7CgogICAgZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgICAgcmV0dXJuIF9tb3VudGVkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgcmV0dXJuIG1vdW50ZWQ7CiAgfSgpCn07"},{"version":3,"sources":["Init.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"init\">\n    <div class=\"init_display\">\n      <div class=\"init_head\"></div>\n    </div>\n    <loading></loading>\n  </div>\n</template>\n\n<script>\nimport firebase from 'firebase'\nimport store from '../store'\nimport loading from '@/components/loading.vue'\n\nexport default {\n  name: 'Init',\n  data () {\n    return {\n    }\n  },\n  components: {\n    loading\n  },\n  created(){\n    store.commit('loading/setIsLoading', true)\n    store.commit('loading/setStatusMsg', \"読み込み中..\")\n  },\n  async mounted () {\n    let t = this\n    let userData = await firebase.auth().signInAnonymously()\n    store.commit('auth/onAuthStateChanged', userData.user);\n    store.commit('auth/onUserStatusChanged', userData.user.uid ? true : false);\n\n    let userRef = firebase.firestore().collection(\"users\").doc(userData.user.uid)\n    let sellRef = firebase.firestore().collection(\"sells\").doc(userData.user.uid)\n    let buyRef = firebase.firestore().collection(\"buys\").doc(userData.user.uid)\n    let noticeRef = firebase.firestore().collection(\"notices\").doc(userData.user.uid)\n\n    await userRef.get().then(function(doc) {\n      if (doc.exists) {\n        store.commit('loading/setStatusMsg', \"ユーザー情報更新中..\")\n        userRef.update({\n          updated_at: firebase.firestore.FieldValue.serverTimestamp()\n        })\n      } else {\n        store.commit('loading/setStatusMsg', \"初回ユーザー情報作成中..\")\n        // 初期設定(ユーザー)\n        userRef.set({\n          updated_at: firebase.firestore.FieldValue.serverTimestamp(),\n          created_at: firebase.firestore.FieldValue.serverTimestamp(),\n          name: \"名も無き冒険者\",\n          icon: Math.floor( Math.random() * (37 + 1 - 1) ) + 1\n        })\n        // 初期設定(売る)\n        sellRef.set({\n          count: 15,\n        })\n        // 初期設定(売る)\n        buyRef.set({\n          count: 15,\n        })\n        // 初期設定(通知)\n        noticeRef.set({\n          items: []\n        })\n      }\n    });\n    store.commit('loading/setStatusMsg', \"ユーザー更新完了..\")\n    setTimeout(function(){\n      t.$router.push('home')\n      store.commit('loading/setIsLoading', false)\n    },1500)\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.init{\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 100;\n  &_head {\n    position: absolute;\n    height: 50px;\n    width: 250px;\n    top: 15px;\n    left: 10px;\n    background-size: contain;\n    background-image: url(\"../assets/imgs/game_title.png\");\n    background-repeat: no-repeat;\n    z-index: 10;\n  }\n  &_foot {\n    position: absolute;\n    top: 56%;\n    left: 50%;\n    transform: translate(-50%,-50%);\n    text-align: center;\n    font-size: 18px;\n    z-index: 10;\n    color: #fff;\n    font-family: \"choco\";\n  }\n}\n</style>"],"sourceRoot":"src/views"}]}