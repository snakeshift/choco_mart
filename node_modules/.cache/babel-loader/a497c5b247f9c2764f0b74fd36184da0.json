{"remainingRequest":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/babel-loader/lib/index.js!/Users/yokoyamakenta/Desktop/choco_mart/node_modules/vuetify-loader/lib/loader.js??ref--18-0!/Users/yokoyamakenta/Desktop/choco_mart/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yokoyamakenta/Desktop/choco_mart/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yokoyamakenta/Desktop/choco_mart/src/views/Init.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yokoyamakenta/Desktop/choco_mart/src/views/Init.vue","mtime":1602465627453},{"path":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/cache-loader/dist/cjs.js","mtime":1599521191920},{"path":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/babel-loader/lib/index.js","mtime":1599521191611},{"path":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/vuetify-loader/lib/loader.js","mtime":1599521195655},{"path":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/cache-loader/dist/cjs.js","mtime":1599521191920},{"path":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/vue-loader/lib/index.js","mtime":1599521195584}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIi9Vc2Vycy95b2tveWFtYWtlbnRhL0Rlc2t0b3AvY2hvY29fbWFydC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMveW9rb3lhbWFrZW50YS9EZXNrdG9wL2Nob2NvX21hcnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGZpcmViYXNlIGZyb20gJ2ZpcmViYXNlJzsKaW1wb3J0IHN0b3JlIGZyb20gJy4uL3N0b3JlJzsKaW1wb3J0IGxvYWRpbmcgZnJvbSAnQC9jb21wb25lbnRzL2xvYWRpbmcudnVlJzsKaW1wb3J0IHsgbWFwR2V0dGVycywgbWFwTXV0YXRpb25zLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IFVTRVJfUkVGLCBTRUxMX1JFRiwgQlVZX1JFRiwgTk9USUNFX1JFRiB9IGZyb20gJ0AvY29uZmlnL2ZpcmViYXNlL3JlZic7CmltcG9ydCB7IENVUlJFTlRfVElNRSB9IGZyb20gJ0AvY29uZmlnL2ZpcmViYXNlL3V0aWwnOwppbXBvcnQgeyBNQVhfQlVZLCBNQVhfU0VMTCwgTUFYX0lDT05fTlVNIH0gZnJvbSAnQC9jb25maWcvc2V0dGluZyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnSW5pdCcsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7fTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIGxvYWRpbmc6IGxvYWRpbmcKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnNldElzTG9hZGluZyh0cnVlKTsKICAgIHRoaXMuc2V0U3RhdHVzTXNnKCfoqq3jgb/ovrzjgb/kuK0uLicpOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gKCkgewogICAgdmFyIF9tb3VudGVkID0gX2FzeW5jVG9HZW5lcmF0b3IoCiAgICAvKiNfX1BVUkVfXyovCiAgICByZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgdXNlclJlZiwgc2VsbFJlZiwgYnV5UmVmLCBub3RpY2VSZWY7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRVc2VyQW5vbnltb3VzbHkoKTsKCiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICB1c2VyUmVmID0gVVNFUl9SRUYoKS5kb2ModGhpcy51c2VyLnVpZCk7CiAgICAgICAgICAgICAgc2VsbFJlZiA9IFNFTExfUkVGKCkuZG9jKHRoaXMudXNlci51aWQpOwogICAgICAgICAgICAgIGJ1eVJlZiA9IEJVWV9SRUYoKS5kb2ModGhpcy51c2VyLnVpZCk7CiAgICAgICAgICAgICAgbm90aWNlUmVmID0gTk9USUNFX1JFRigpLmRvYyh0aGlzLnVzZXIudWlkKTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICByZXR1cm4gdXNlclJlZi5nZXQoKS50aGVuKGZ1bmN0aW9uIChkb2MpIHsKICAgICAgICAgICAgICAgIGlmIChkb2MuZXhpc3RzKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdHVzTXNnKCfjg6bjg7zjgrbjg7zmg4XloLHmm7TmlrDkuK0uLicpOwogICAgICAgICAgICAgICAgICB1c2VyUmVmLnVwZGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZF9hdDogQ1VSUkVOVF9USU1FKCkKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXR1c01zZygn5Yid5Zue44Om44O844K244O85oOF5aCx5L2c5oiQ5LitLi4nKTsgLy8g5Yid5pyf6Kit5a6aKOODpuODvOOCtuODvCkKCiAgICAgICAgICAgICAgICAgIHVzZXJSZWYuc2V0KHsKICAgICAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBDVVJSRU5UX1RJTUUoKSwKICAgICAgICAgICAgICAgICAgICBjcmVhdGVkX2F0OiBDVVJSRU5UX1RJTUUoKSwKICAgICAgICAgICAgICAgICAgICBuYW1lOiAn5ZCN44KC54Sh44GN5YaS6Zm66ICFJywKICAgICAgICAgICAgICAgICAgICBpY29uOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoTUFYX0lDT05fTlVNICsgMSAtIDEpKSArIDEsCiAgICAgICAgICAgICAgICAgICAgYWRtaW46IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIGlzQmFuOiBmYWxzZQogICAgICAgICAgICAgICAgICB9KTsgLy8g5Yid5pyf6Kit5a6aKOWjsuOCiykKCiAgICAgICAgICAgICAgICAgIHNlbGxSZWYuc2V0KHsKICAgICAgICAgICAgICAgICAgICBjb3VudDogTUFYX1NFTEwKICAgICAgICAgICAgICAgICAgfSk7IC8vIOWIneacn+ioreWumijlo7LjgospCgogICAgICAgICAgICAgICAgICBidXlSZWYuc2V0KHsKICAgICAgICAgICAgICAgICAgICBjb3VudDogTUFYX0JVWQogICAgICAgICAgICAgICAgICB9KTsgLy8g5Yid5pyf6Kit5a6aKOmAmuefpSkKCiAgICAgICAgICAgICAgICAgIG5vdGljZVJlZi5zZXQoewogICAgICAgICAgICAgICAgICAgIGl0ZW1zOiBbXQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LmJpbmQodGhpcykpOwoKICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgIHRoaXMuc2V0U3RhdHVzTXNnKCfjg6bjg7zjgrbjg7zmm7TmlrDlrozkuoYuLicpOwogICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJ2hvbWUnKTsKICAgICAgICAgICAgICAgIHRoaXMuc2V0SXNMb2FkaW5nKGZhbHNlKTsKICAgICAgICAgICAgICB9LmJpbmQodGhpcyksIDE1MDApOwoKICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICB9KSk7CgogICAgZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgICAgcmV0dXJuIF9tb3VudGVkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgcmV0dXJuIG1vdW50ZWQ7CiAgfSgpLAogIG1ldGhvZHM6IF9vYmplY3RTcHJlYWQoe30sIG1hcE11dGF0aW9ucygnbG9hZGluZycsIFsnc2V0SXNMb2FkaW5nJywgJ3NldFN0YXR1c01zZyddKSwge30sIG1hcEFjdGlvbnMoJ2F1dGgnLCBbJ2dldFVzZXJBbm9ueW1vdXNseSddKSksCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoJ2F1dGgnLCBbJ3VzZXInXSkpCn07"},{"version":3,"sources":["Init.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"init\">\n    <div class=\"init_display\">\n      <div class=\"init_head\"></div>\n    </div>\n    <loading></loading>\n  </div>\n</template>\n\n<script>\nimport firebase from 'firebase'\nimport store from '../store'\nimport loading from '@/components/loading.vue'\nimport { mapGetters, mapMutations, mapActions } from 'vuex'\nimport { USER_REF, SELL_REF, BUY_REF, NOTICE_REF } from '@/config/firebase/ref'\nimport { CURRENT_TIME } from '@/config/firebase/util'\nimport { MAX_BUY, MAX_SELL, MAX_ICON_NUM } from '@/config/setting'\n\nexport default {\n  name: 'Init',\n  data () {\n    return {\n    }\n  },\n  components: {\n    loading\n  },\n  created(){\n    this.setIsLoading(true)\n    this.setStatusMsg('読み込み中..')\n  },\n  async mounted () {\n    await this.getUserAnonymously()\n\n    const userRef = USER_REF().doc(this.user.uid)\n    const sellRef = SELL_REF().doc(this.user.uid)\n    const buyRef = BUY_REF().doc(this.user.uid)\n    const noticeRef = NOTICE_REF().doc(this.user.uid)\n\n    await userRef.get().then(function(doc) {\n      if (doc.exists) {\n        this.setStatusMsg('ユーザー情報更新中..')\n        userRef.update({\n          updated_at: CURRENT_TIME()\n        })\n      } else {\n        this.setStatusMsg('初回ユーザー情報作成中..')\n        // 初期設定(ユーザー)\n        userRef.set({\n          updated_at: CURRENT_TIME(),\n          created_at: CURRENT_TIME(),\n          name: '名も無き冒険者',\n          icon: Math.floor( Math.random() * (MAX_ICON_NUM + 1 - 1) ) + 1,\n          admin: false,\n          isBan: false\n        })\n        // 初期設定(売る)\n        sellRef.set({\n          count: MAX_SELL,\n        })\n        // 初期設定(売る)\n        buyRef.set({\n          count: MAX_BUY,\n        })\n        // 初期設定(通知)\n        noticeRef.set({\n          items: []\n        })\n      }\n    }.bind(this))\n    this.setStatusMsg('ユーザー更新完了..')\n    setTimeout(function(){\n      this.$router.push('home')\n      this.setIsLoading(false)\n    }.bind(this), 1500)\n  },\n  methods: {\n    ...mapMutations('loading', [\n      'setIsLoading',\n      'setStatusMsg'\n    ]),\n    ...mapActions('auth', [\n      'getUserAnonymously'\n    ])\n  },\n  computed: {\n    ...mapGetters('auth', [\n      'user'\n    ])\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.init{\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 100;\n  &_head {\n    position: absolute;\n    height: 50px;\n    width: 250px;\n    top: 15px;\n    left: 10px;\n    background-size: contain;\n    background-image: url(\"../assets/imgs/game_title.png\");\n    background-repeat: no-repeat;\n    z-index: 10;\n  }\n  &_foot {\n    position: absolute;\n    top: 56%;\n    left: 50%;\n    transform: translate(-50%,-50%);\n    text-align: center;\n    font-size: 18px;\n    z-index: 10;\n    color: #fff;\n    font-family: \"choco\";\n  }\n}\n</style>"],"sourceRoot":"src/views"}]}