{"remainingRequest":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/babel-loader/lib/index.js!/Users/yokoyamakenta/Desktop/choco_mart/node_modules/vuetify-loader/lib/loader.js??ref--18-0!/Users/yokoyamakenta/Desktop/choco_mart/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yokoyamakenta/Desktop/choco_mart/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yokoyamakenta/Desktop/choco_mart/src/views/Init.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yokoyamakenta/Desktop/choco_mart/src/views/Init.vue","mtime":1600776422335},{"path":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/cache-loader/dist/cjs.js","mtime":1599521191920},{"path":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/babel-loader/lib/index.js","mtime":1599521191611},{"path":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/vuetify-loader/lib/loader.js","mtime":1599521195655},{"path":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/cache-loader/dist/cjs.js","mtime":1599521191920},{"path":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/vue-loader/lib/index.js","mtime":1599521195584}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIi9Vc2Vycy95b2tveWFtYWtlbnRhL0Rlc2t0b3AvY2hvY29fbWFydC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICIvVXNlcnMveW9rb3lhbWFrZW50YS9EZXNrdG9wL2Nob2NvX21hcnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7IHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7IGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7IH0pOyBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7IH0gcmV0dXJuIGtleXM7IH0KCmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQodGFyZ2V0KSB7IGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7IHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV0gIT0gbnVsbCA/IGFyZ3VtZW50c1tpXSA6IHt9OyBpZiAoaSAlIDIpIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOyB9KTsgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgeyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOyB9IGVsc2UgeyBvd25LZXlzKE9iamVjdChzb3VyY2UpKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7IH0pOyB9IH0gcmV0dXJuIHRhcmdldDsgfQoKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGZpcmViYXNlIGZyb20gJ2ZpcmViYXNlJzsKaW1wb3J0IHN0b3JlIGZyb20gJy4uL3N0b3JlJzsKaW1wb3J0IGxvYWRpbmcgZnJvbSAnQC9jb21wb25lbnRzL2xvYWRpbmcudnVlJzsKaW1wb3J0IHsgbWFwR2V0dGVycywgbWFwTXV0YXRpb25zLCBtYXBBY3Rpb25zIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IFVTRVJfUkVGLCBTRUxMX1JFRiwgQlVZX1JFRiwgTk9USUNFX1JFRiB9IGZyb20gJ0AvY29uZmlnL2ZpcmViYXNlL3JlZic7CmltcG9ydCB7IENVUlJFTlRfVElNRSB9IGZyb20gJ0AvY29uZmlnL2ZpcmViYXNlL3V0aWwnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0luaXQnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4ge307CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBsb2FkaW5nOiBsb2FkaW5nCiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5zZXRJc0xvYWRpbmcodHJ1ZSk7CiAgICB0aGlzLnNldFN0YXR1c01zZygn6Kqt44G/6L6844G/5LitLi4nKTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHsKICAgIHZhciBfbW91bnRlZCA9IF9hc3luY1RvR2VuZXJhdG9yKAogICAgLyojX19QVVJFX18qLwogICAgcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIHVzZXJSZWYsIHNlbGxSZWYsIGJ1eVJlZiwgbm90aWNlUmVmOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VXNlckFub255bW91c2x5KCk7CgogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgdXNlclJlZiA9IFVTRVJfUkVGKCkuZG9jKHRoaXMudXNlci51aWQpOwogICAgICAgICAgICAgIHNlbGxSZWYgPSBTRUxMX1JFRigpLmRvYyh0aGlzLnVzZXIudWlkKTsKICAgICAgICAgICAgICBidXlSZWYgPSBCVVlfUkVGKCkuZG9jKHRoaXMudXNlci51aWQpOwogICAgICAgICAgICAgIG5vdGljZVJlZiA9IE5PVElDRV9SRUYoKS5kb2ModGhpcy51c2VyLnVpZCk7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDg7CiAgICAgICAgICAgICAgcmV0dXJuIHVzZXJSZWYuZ2V0KCkudGhlbihmdW5jdGlvbiAoZG9jKSB7CiAgICAgICAgICAgICAgICBpZiAoZG9jLmV4aXN0cykgewogICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXR1c01zZygn44Om44O844K244O85oOF5aCx5pu05paw5LitLi4nKTsKICAgICAgICAgICAgICAgICAgdXNlclJlZi51cGRhdGUoewogICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IENVUlJFTlRfVElNRSgpCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0dXNNc2coJ+WIneWbnuODpuODvOOCtuODvOaDheWgseS9nOaIkOS4rS4uJyk7IC8vIOWIneacn+ioreWumijjg6bjg7zjgrbjg7wpCgogICAgICAgICAgICAgICAgICB1c2VyUmVmLnNldCh7CiAgICAgICAgICAgICAgICAgICAgdXBkYXRlZF9hdDogQ1VSUkVOVF9USU1FKCksCiAgICAgICAgICAgICAgICAgICAgY3JlYXRlZF9hdDogQ1VSUkVOVF9USU1FKCksCiAgICAgICAgICAgICAgICAgICAgbmFtZTogIuWQjeOCgueEoeOBjeWGkumZuuiAhSIsCiAgICAgICAgICAgICAgICAgICAgaWNvbjogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKDM3ICsgMSAtIDEpKSArIDEKICAgICAgICAgICAgICAgICAgfSk7IC8vIOWIneacn+ioreWumijlo7LjgospCgogICAgICAgICAgICAgICAgICBzZWxsUmVmLnNldCh7CiAgICAgICAgICAgICAgICAgICAgY291bnQ6IDE1CiAgICAgICAgICAgICAgICAgIH0pOyAvLyDliJ3mnJ/oqK3lrpoo5aOy44KLKQoKICAgICAgICAgICAgICAgICAgYnV5UmVmLnNldCh7CiAgICAgICAgICAgICAgICAgICAgY291bnQ6IDE1CiAgICAgICAgICAgICAgICAgIH0pOyAvLyDliJ3mnJ/oqK3lrpoo6YCa55+lKQoKICAgICAgICAgICAgICAgICAgbm90aWNlUmVmLnNldCh7CiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IFtdCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7CgogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0dXNNc2coJ+ODpuODvOOCtuODvOabtOaWsOWujOS6hi4uJyk7CiAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnaG9tZScpOwogICAgICAgICAgICAgICAgdGhpcy5zZXRJc0xvYWRpbmcoZmFsc2UpOwogICAgICAgICAgICAgIH0uYmluZCh0aGlzKSwgMTUwMCk7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgIH0pKTsKCiAgICBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgICByZXR1cm4gX21vdW50ZWQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgIH0KCiAgICByZXR1cm4gbW91bnRlZDsKICB9KCksCiAgbWV0aG9kczogX29iamVjdFNwcmVhZCh7fSwgbWFwTXV0YXRpb25zKCdsb2FkaW5nJywgWydzZXRJc0xvYWRpbmcnLCAnc2V0U3RhdHVzTXNnJ10pLCB7fSwgbWFwQWN0aW9ucygnYXV0aCcsIFsnZ2V0VXNlckFub255bW91c2x5J10pKSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycygnYXV0aCcsIFsndXNlciddKSkKfTs="},{"version":3,"sources":["Init.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAUA,OAAA,QAAA,MAAA,UAAA;AACA,OAAA,KAAA,MAAA,UAAA;AACA,OAAA,OAAA,MAAA,0BAAA;AACA,SAAA,UAAA,EAAA,YAAA,EAAA,UAAA,QAAA,MAAA;AACA,SAAA,QAAA,EAAA,QAAA,EAAA,OAAA,EAAA,UAAA,QAAA,uBAAA;AACA,SAAA,YAAA,QAAA,wBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,MADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA,EAAA;AAEA,GALA;AAMA,EAAA,UAAA,EAAA;AACA,IAAA,OAAA,EAAA;AADA,GANA;AASA,EAAA,OATA,qBASA;AACA,SAAA,YAAA,CAAA,IAAA;AACA,SAAA,YAAA,CAAA,SAAA;AACA,GAZA;AAaA,EAAA,OAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAcA,KAAA,kBAAA,EAdA;;AAAA;AAgBA,cAAA,OAhBA,GAgBA,QAAA,GAAA,GAAA,CAAA,KAAA,IAAA,CAAA,GAAA,CAhBA;AAiBA,cAAA,OAjBA,GAiBA,QAAA,GAAA,GAAA,CAAA,KAAA,IAAA,CAAA,GAAA,CAjBA;AAkBA,cAAA,MAlBA,GAkBA,OAAA,GAAA,GAAA,CAAA,KAAA,IAAA,CAAA,GAAA,CAlBA;AAmBA,cAAA,SAnBA,GAmBA,UAAA,GAAA,GAAA,CAAA,KAAA,IAAA,CAAA,GAAA,CAnBA;AAAA;AAAA,qBAqBA,OAAA,CAAA,GAAA,GAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,oBAAA,GAAA,CAAA,MAAA,EAAA;AACA,uBAAA,YAAA,CAAA,aAAA;AACA,kBAAA,OAAA,CAAA,MAAA,CAAA;AACA,oBAAA,UAAA,EAAA,YAAA;AADA,mBAAA;AAGA,iBALA,MAKA;AACA,uBAAA,YAAA,CAAA,eAAA,EADA,CAEA;;AACA,kBAAA,OAAA,CAAA,GAAA,CAAA;AACA,oBAAA,UAAA,EAAA,YAAA,EADA;AAEA,oBAAA,UAAA,EAAA,YAAA,EAFA;AAGA,oBAAA,IAAA,EAAA,SAHA;AAIA,oBAAA,IAAA,EAAA,IAAA,CAAA,KAAA,CAAA,IAAA,CAAA,MAAA,MAAA,KAAA,CAAA,GAAA,CAAA,CAAA,IAAA;AAJA,mBAAA,EAHA,CASA;;AACA,kBAAA,OAAA,CAAA,GAAA,CAAA;AACA,oBAAA,KAAA,EAAA;AADA,mBAAA,EAVA,CAaA;;AACA,kBAAA,MAAA,CAAA,GAAA,CAAA;AACA,oBAAA,KAAA,EAAA;AADA,mBAAA,EAdA,CAiBA;;AACA,kBAAA,SAAA,CAAA,GAAA,CAAA;AACA,oBAAA,KAAA,EAAA;AADA,mBAAA;AAGA;AACA,eA5BA,CA4BA,IA5BA,CA4BA,IA5BA,CAAA,CArBA;;AAAA;AAkDA,mBAAA,YAAA,CAAA,YAAA;AACA,cAAA,UAAA,CAAA,YAAA;AACA,qBAAA,OAAA,CAAA,IAAA,CAAA,MAAA;AACA,qBAAA,YAAA,CAAA,KAAA;AACA,eAHA,CAGA,IAHA,CAGA,IAHA,CAAA,EAGA,IAHA,CAAA;;AAnDA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAwDA,EAAA,OAAA,oBACA,YAAA,CAAA,SAAA,EAAA,CACA,cADA,EAEA,cAFA,CAAA,CADA,MAKA,UAAA,CAAA,MAAA,EAAA,CACA,oBADA,CAAA,CALA,CAxDA;AAiEA,EAAA,QAAA,oBACA,UAAA,CAAA,MAAA,EAAA,CACA,MADA,CAAA,CADA;AAjEA,CAAA","sourcesContent":["<template>\n  <div class=\"init\">\n    <div class=\"init_display\">\n      <div class=\"init_head\"></div>\n    </div>\n    <loading></loading>\n  </div>\n</template>\n\n<script>\nimport firebase from 'firebase'\nimport store from '../store'\nimport loading from '@/components/loading.vue'\nimport { mapGetters, mapMutations, mapActions } from 'vuex'\nimport { USER_REF, SELL_REF, BUY_REF, NOTICE_REF } from '@/config/firebase/ref'\nimport { CURRENT_TIME } from '@/config/firebase/util'\n\nexport default {\n  name: 'Init',\n  data () {\n    return {\n    }\n  },\n  components: {\n    loading\n  },\n  created(){\n    this.setIsLoading(true)\n    this.setStatusMsg('読み込み中..')\n  },\n  async mounted () {\n    await this.getUserAnonymously()\n\n    const userRef = USER_REF().doc(this.user.uid)\n    const sellRef = SELL_REF().doc(this.user.uid)\n    const buyRef = BUY_REF().doc(this.user.uid)\n    const noticeRef = NOTICE_REF().doc(this.user.uid)\n\n    await userRef.get().then(function(doc) {\n      if (doc.exists) {\n        this.setStatusMsg('ユーザー情報更新中..')\n        userRef.update({\n          updated_at: CURRENT_TIME()\n        })\n      } else {\n        this.setStatusMsg('初回ユーザー情報作成中..')\n        // 初期設定(ユーザー)\n        userRef.set({\n          updated_at: CURRENT_TIME(),\n          created_at: CURRENT_TIME(),\n          name: \"名も無き冒険者\",\n          icon: Math.floor( Math.random() * (37 + 1 - 1) ) + 1\n        })\n        // 初期設定(売る)\n        sellRef.set({\n          count: 15,\n        })\n        // 初期設定(売る)\n        buyRef.set({\n          count: 15,\n        })\n        // 初期設定(通知)\n        noticeRef.set({\n          items: []\n        })\n      }\n    }.bind(this))\n    this.setStatusMsg('ユーザー更新完了..')\n    setTimeout(function(){\n      this.$router.push('home')\n      this.setIsLoading(false)\n    }.bind(this), 1500)\n  },\n  methods: {\n    ...mapMutations('loading', [\n      'setIsLoading',\n      'setStatusMsg'\n    ]),\n    ...mapActions('auth', [\n      'getUserAnonymously'\n    ])\n  },\n  computed: {\n    ...mapGetters('auth', [\n      'user'\n    ])\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.init{\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  z-index: 100;\n  &_head {\n    position: absolute;\n    height: 50px;\n    width: 250px;\n    top: 15px;\n    left: 10px;\n    background-size: contain;\n    background-image: url(\"../assets/imgs/game_title.png\");\n    background-repeat: no-repeat;\n    z-index: 10;\n  }\n  &_foot {\n    position: absolute;\n    top: 56%;\n    left: 50%;\n    transform: translate(-50%,-50%);\n    text-align: center;\n    font-size: 18px;\n    z-index: 10;\n    color: #fff;\n    font-family: \"choco\";\n  }\n}\n</style>"],"sourceRoot":"src/views"}]}