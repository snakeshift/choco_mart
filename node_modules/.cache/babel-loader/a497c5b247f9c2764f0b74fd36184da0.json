{"remainingRequest":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/babel-loader/lib/index.js!/Users/yokoyamakenta/Desktop/choco_mart/node_modules/vuetify-loader/lib/loader.js??ref--18-0!/Users/yokoyamakenta/Desktop/choco_mart/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/yokoyamakenta/Desktop/choco_mart/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yokoyamakenta/Desktop/choco_mart/src/views/Init.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yokoyamakenta/Desktop/choco_mart/src/views/Init.vue","mtime":1582559886663},{"path":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yokoyamakenta/Desktop/choco_mart/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3lva295YW1ha2VudGEvRGVza3RvcC9jaG9jb19tYXJ0L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGZpcmViYXNlIGZyb20gJ2ZpcmViYXNlJzsKaW1wb3J0IHN0b3JlIGZyb20gJy4uL3N0b3JlJzsKaW1wb3J0IGxvYWRpbmcgZnJvbSAnQC9jb21wb25lbnRzL2xvYWRpbmcudnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdJbml0JywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3RhdHVzTXNnOiAi44Om44O844K244O85oOF5aCx6KqN6Ki85LitIgogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIGxvYWRpbmc6IGxvYWRpbmcKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICBzdG9yZS5jb21taXQoJ2xvYWRpbmcvc2V0SXNMb2FkaW5nJywgdHJ1ZSk7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7CiAgICB2YXIgX21vdW50ZWQgPSBfYXN5bmNUb0dlbmVyYXRvcigKICAgIC8qI19fUFVSRV9fKi8KICAgIHJlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciB0LCB1c2VyRGF0YSwgdXNlclJlZiwgc2VsbFJlZiwgYnV5UmVmLCBub3RpY2VSZWY7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICB0ID0gdGhpczsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gZmlyZWJhc2UuYXV0aCgpLnNpZ25JbkFub255bW91c2x5KCk7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgdXNlckRhdGEgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgIHN0b3JlLmNvbW1pdCgnYXV0aC9vbkF1dGhTdGF0ZUNoYW5nZWQnLCB1c2VyRGF0YS51c2VyKTsKICAgICAgICAgICAgICBzdG9yZS5jb21taXQoJ2F1dGgvb25Vc2VyU3RhdHVzQ2hhbmdlZCcsIHVzZXJEYXRhLnVzZXIudWlkID8gdHJ1ZSA6IGZhbHNlKTsKICAgICAgICAgICAgICB1c2VyUmVmID0gZmlyZWJhc2UuZmlyZXN0b3JlKCkuY29sbGVjdGlvbigidXNlcnMiKS5kb2ModXNlckRhdGEudXNlci51aWQpOwogICAgICAgICAgICAgIHNlbGxSZWYgPSBmaXJlYmFzZS5maXJlc3RvcmUoKS5jb2xsZWN0aW9uKCJzZWxscyIpLmRvYyh1c2VyRGF0YS51c2VyLnVpZCk7CiAgICAgICAgICAgICAgYnV5UmVmID0gZmlyZWJhc2UuZmlyZXN0b3JlKCkuY29sbGVjdGlvbigiYnV5cyIpLmRvYyh1c2VyRGF0YS51c2VyLnVpZCk7CiAgICAgICAgICAgICAgbm90aWNlUmVmID0gZmlyZWJhc2UuZmlyZXN0b3JlKCkuY29sbGVjdGlvbigibm90aWNlcyIpLmRvYyh1c2VyRGF0YS51c2VyLnVpZCk7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgIHJldHVybiB1c2VyUmVmLmdldCgpLnRoZW4oZnVuY3Rpb24gKGRvYykgewogICAgICAgICAgICAgICAgaWYgKGRvYy5leGlzdHMpIHsKICAgICAgICAgICAgICAgICAgdC5zdGF0dXNNc2cgPSAi44Om44O844K244O85oOF5aCx5pu05paw5LitIjsKICAgICAgICAgICAgICAgICAgdXNlclJlZi51cGRhdGUoewogICAgICAgICAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IGZpcmViYXNlLmZpcmVzdG9yZS5GaWVsZFZhbHVlLnNlcnZlclRpbWVzdGFtcCgpCiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgdC5zdGF0dXNNc2cgPSAi5Yid5Zue44Om44O844K244O85oOF5aCx5L2c5oiQ5LitIjsgLy8g5Yid5pyf6Kit5a6aKOODpuODvOOCtuODvCkKCiAgICAgICAgICAgICAgICAgIHVzZXJSZWYuc2V0KHsKICAgICAgICAgICAgICAgICAgICB1cGRhdGVkX2F0OiBmaXJlYmFzZS5maXJlc3RvcmUuRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXAoKSwKICAgICAgICAgICAgICAgICAgICBjcmVhdGVkX2F0OiBmaXJlYmFzZS5maXJlc3RvcmUuRmllbGRWYWx1ZS5zZXJ2ZXJUaW1lc3RhbXAoKSwKICAgICAgICAgICAgICAgICAgICBuYW1lOiAi5ZCN44KC54Sh44GN5YaS6Zm66ICFIiwKICAgICAgICAgICAgICAgICAgICBpY29uOiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoMzcgKyAxIC0gMSkpICsgMQogICAgICAgICAgICAgICAgICB9KTsgLy8g5Yid5pyf6Kit5a6aKOWjsuOCiykKCiAgICAgICAgICAgICAgICAgIHNlbGxSZWYuc2V0KHsKICAgICAgICAgICAgICAgICAgICBjb3VudDogMTUKICAgICAgICAgICAgICAgICAgfSk7IC8vIOWIneacn+ioreWumijlo7LjgospCgogICAgICAgICAgICAgICAgICBidXlSZWYuc2V0KHsKICAgICAgICAgICAgICAgICAgICBjb3VudDogMTUKICAgICAgICAgICAgICAgICAgfSk7IC8vIOWIneacn+ioreWumijpgJrnn6UpCgogICAgICAgICAgICAgICAgICBub3RpY2VSZWYuc2V0KHsKICAgICAgICAgICAgICAgICAgICBpdGVtczogW10KICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIHQuc3RhdHVzTXNnID0gIuODpuODvOOCtuODvOabtOaWsOWujOS6hiI7CiAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB0LiRyb3V0ZXIucHVzaCgnaG9tZScpOwogICAgICAgICAgICAgICAgc3RvcmUuY29tbWl0KCdsb2FkaW5nL3NldElzTG9hZGluZycsIGZhbHNlKTsKICAgICAgICAgICAgICB9LCAxNTAwMDApOwoKICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgdGhpcyk7CiAgICB9KSk7CgogICAgZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgICAgcmV0dXJuIF9tb3VudGVkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICB9CgogICAgcmV0dXJuIG1vdW50ZWQ7CiAgfSgpCn07"},{"version":3,"sources":["Init.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"init\">\n    <div class=\"init_display\">\n      <div class=\"init_head\"></div>\n      <div class=\"init_foot\">{{statusMsg}}..</div>\n    </div>\n    <loading></loading>\n  </div>\n</template>\n\n<script>\nimport firebase from 'firebase'\nimport store from '../store'\nimport loading from '@/components/loading.vue'\n\nexport default {\n  name: 'Init',\n  data () {\n    return {\n      statusMsg: \"ユーザー情報認証中\"\n    }\n  },\n  components: {\n    loading\n  },\n  created(){\n    store.commit('loading/setIsLoading', true)\n  },\n  async mounted () {\n    let t = this\n    let userData = await firebase.auth().signInAnonymously()\n    store.commit('auth/onAuthStateChanged', userData.user);\n    store.commit('auth/onUserStatusChanged', userData.user.uid ? true : false);\n\n    let userRef = firebase.firestore().collection(\"users\").doc(userData.user.uid)\n    let sellRef = firebase.firestore().collection(\"sells\").doc(userData.user.uid)\n    let buyRef = firebase.firestore().collection(\"buys\").doc(userData.user.uid)\n    let noticeRef = firebase.firestore().collection(\"notices\").doc(userData.user.uid)\n\n    await userRef.get().then(function(doc) {\n      if (doc.exists) {\n        t.statusMsg = \"ユーザー情報更新中\"\n        userRef.update({\n          updated_at: firebase.firestore.FieldValue.serverTimestamp()\n        })\n      } else {\n        t.statusMsg = \"初回ユーザー情報作成中\"\n        // 初期設定(ユーザー)\n        userRef.set({\n          updated_at: firebase.firestore.FieldValue.serverTimestamp(),\n          created_at: firebase.firestore.FieldValue.serverTimestamp(),\n          name: \"名も無き冒険者\",\n          icon: Math.floor( Math.random() * (37 + 1 - 1) ) + 1\n        })\n        // 初期設定(売る)\n        sellRef.set({\n          count: 15,\n        })\n        // 初期設定(売る)\n        buyRef.set({\n          count: 15,\n        })\n        // 初期設定(通知)\n        noticeRef.set({\n          items: []\n        })\n      }\n    });\n    t.statusMsg = \"ユーザー更新完了\"\n    setTimeout(function(){\n      t.$router.push('home')\n      store.commit('loading/setIsLoading', false)\n    },150000)\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.init{\n  z-index: 100;\n}\n.init_head{\n  position: absolute;\n  height: 50px;\n  width: 250px;\n  top: 15px;\n  left: 10px;\n  background-size: contain;\n  background-image: url(\"../assets/imgs/game_title.png\");\n  background-repeat: no-repeat;\n  z-index: 10;\n}\n.init_foot{\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%,-50%);\n  text-align: center;\n  font-weight: bold;\n  font-size: 18px;\n  z-index: 10;\n}\n</style>"],"sourceRoot":"src/views"}]}